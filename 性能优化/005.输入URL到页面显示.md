# 从输入`URL`到页面展示
1. 用户输入
- 搜索内容
  使用浏览器默认的搜索引擎，合成带搜索关键字的`URL`
- 请求的`URL`
  判断内容若符合`URL`规则，地址栏将根据规则，为内容加上协议，合成完成的`URL`
  
**Note**: 用户输入关键字回车后，意味着当前页面即将要被替换成新页面，在替换之前，浏览器会给页面一次执行`beforeunload`事件的机会，用户可通过`beforeunload`事件取消导航，让浏览器不再执行后续工作。

2. `URL`请求过程

2.1 浏览器进程通过进程间通信（IPC）把`URL`请求发送至网络进程，网络进程收到`URL`请求后，发起`URL`请求流程
2.2 网络进程会查找本地缓存是否有缓存资源
    - 有，直接返回
    - 无，进入网络请求流程
      (1) 进行`DNS`解析，获取请求域名的服务器`IP`地址;
      (2) `HTTPS`协议，还需建立`TLS`连接
2.3 建立`TCP`连接
2.4 浏览器端构建请求行、请求头等信息，将与该域名相关的`Cookie`等数据附加到请求头，向服务器发送请求
2.5 服务器根据请求信息生成响应数据（包括响应行、响应头和响应体等信息）发送给网络进程
    - 重定向
    网络进程解析响应头，发现返回的状态码为`301`或`302`，会触发重定向。网络进程会从响应头的`Location`字段里读取重定向地址
    - 响应数据类型
    `Content-Type`：会告诉浏览器返回的响应体数据是什么类型

3. 渲染进程
`Chrome`为每个页面分配一个渲染进程，每打开一个新的页签就配套创建一个新的渲染进程

**Note**: 同一站点的多个页面会运行于同一渲染进程

同一站点: 
- 协议相同
- 根域名相同

同一站点样例如下：
```
https://time.geekbang.org
https://www.geekbang.org
https://www.geekbang.org:8080
```

`Chrome`的策略是：每个标签对应一个渲染进程。
**Note**: 从一个页面打开另一个新页面，新页面与当前页面处于同一站点，新页面将复用父页面的渲染进程

4. 提交文档
浏览器进程将网络进程接收的`HTML`数据提交给渲染进程

4.1 浏览器进程收到网络进程的响应头后，向渲染进程发起"提交文档"的消息;
4.2 渲染进程接收到消息后，与网络进程建立传输数据管道;
4.3 文档数据传输完毕，将发送"确认提交"的消息给浏览器进程;
4.4 浏览器进程收到"确认提交"消息后，更新浏览器界面状态（安全状态、地址栏`URL`、前进后退历史状态）;
4.5 更新`Web`页面

5. 渲染阶段
































